<!DOCTYPE html>
<html lang="nl"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <title>Mijn reservaties - Rental Platform</title>

    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:'Segoe UI',Arial;background:#f4f6f8;color:#111;}

        nav{
            background:#1c1c1c;color:white;padding:15px 26px;
            display:flex;justify-content:space-between;align-items:center;
            box-shadow:0 2px 8px rgba(0,0,0,0.35);
        }
        nav a{margin-right:18px;color:#d6d6d6;font-weight:500;}
        nav a:hover{color:white;}

        .container{width:95%;max-width:1100px;margin:35px auto;}
        h1{margin-bottom:20px;}

        .empty{
            background:white;padding:22px;border-radius:12px;
            box-shadow:0 3px 10px rgba(0,0,0,0.12);
        }

        table{
            width:100%;border-collapse:collapse;
            background:white;border-radius:12px;overflow:hidden;
            box-shadow:0 3px 10px rgba(0,0,0,0.12);
        }
        th,td{padding:14px 16px;border-bottom:1px solid #ececec;}
        th{background:#f5f5f5;font-weight:600;text-align:left;}
        .text-right{text-align:right;}

        .btn{
            padding:8px 12px;border-radius:7px;
            background:#1e88e5;color:white;font-weight:600;font-size:14px;
            border:none;cursor:pointer;transition:.2s;
        }
        .btn:hover{background:#1565c0;}

        .back-link{display:inline-block;margin-top:15px;}
    </style>
</head>

<body>

<nav>
    <div>
        <a href="/catalog">Catalogus</a>
        <a href="/cart">Winkelmandje</a>
        <a href="/orders" sec:authorize="isAuthenticated()">Mijn reservaties</a>
    </div>

    <div>
        <span sec:authorize="!isAuthenticated()">
            <a href="/login">Inloggen</a><a href="/register">Registreren</a>
        </span>
        <span sec:authorize="isAuthenticated()">
            Ingelogd als <strong sec:authentication="name"></strong> |
            <form th:action="@{/logout}" method="post" style="display:inline;">
                <button style="background:none;color:#d6d6d6;border:none;">Uitloggen</button>
            </form>
        </span>
    </div>
</nav>

<div class="container">

    <h1>Mijn reservaties</h1>

    <div th:if="${#lists.isEmpty(orders)}" class="empty">
        <p>Je hebt nog geen reservaties.</p><br>
        <a href="/catalog" class="btn">Naar catalogus</a>
    </div>

    <div th:if="${!#lists.isEmpty(orders)}">
        <table>
            <tr>
                <th>Ordernummer</th>
                <th>Datum</th>
                <th>Aantal items</th>
                <th class="text-right">Totaal per dag</th>
                <th></th>
            </tr>

            <tr th:each="order : ${orders}">
                <td th:text="${order.id}"></td>
                <td th:text="${order.createdAt}"></td>
                <td th:text="${order.totalItems}"></td>
                <td class="text-right"
                    th:text="${#numbers.formatDecimal(order.totalPrice,1,'COMMA',2,'POINT')} + ' â‚¬'"></td>
                <td class="text-right">
                    <a th:href="@{'/orders/' + ${order.id}}" class="btn">Details</a>
                </td>
            </tr>
        </table>

        <a href="/catalog" class="back-link">Terug naar catalogus</a>
    </div>

</div>

</body>
</html>
